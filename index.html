<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Chosen Palette: Warm Neutral Harmony -->
    <!-- Application Structure Plan: A single-page dashboard designed for clarity and quick access to key project areas. The structure flows from high-level vision to specific details: 1. Vision & Strategy, 2. Team & Roles (interactive), 3. Technical Setup (visual diagram), 4. Interactive Timeline/Roadmap (Chart.js Gantt), and 5. Detailed Individual Schedules (dynamically shown). This structure allows users to get a quick overview and then drill down into specific areas of interest, which is more user-friendly than a linear report. -->
    <!-- Visualization & Content Choices: Report Info: Project Timeline -> Goal: Organize & Change -> Viz: Interactive Gantt Chart (Chart.js) with Firebase backend -> Interaction: Add, Edit, Delete tasks dynamically. Filter by phase/person -> Justification: Allows real-time, collaborative editing and easy visualization of the entire project schedule and individual responsibilities over time. Report Info: Team Roles & Tasks -> Goal: Organize & Inform -> Viz: Interactive HTML/CSS Cards -> Interaction: Click to expand -> Justification: Presents a clean overview of the team, with details available on demand to avoid clutter. Report Info: Camera Setup -> Goal: Inform -> Viz: HTML/CSS Diagram -> Interaction: Hover for info -> Justification: A visual representation is more intuitive than a text list for understanding the complex 18-camera setup. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <title>지지 프로덕션 2025 WSOP Cyprus 인터랙티브 계획서</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns"></script>

    <script type="module">
        // Firebase SDK imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";
        import { getFirestore, collection, onSnapshot, addDoc, doc, setDoc, deleteDoc, getDocs, writeBatch } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";
        
        window.firebase = {
            initializeApp, getAuth, signInAnonymously, 
            getFirestore, collection, onSnapshot, addDoc, doc, setDoc, deleteDoc, getDocs, writeBatch
        };
    </script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #F8F7F4; color: #3D3D3D; }
        .card { background-color: #FFFFFF; border: 1px solid #EAEAEA; transition: all 0.3s ease; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        .nav-link { transition: all 0.3s ease; cursor: pointer; }
        .nav-link:hover, .nav-link.active { color: #A0522D; border-bottom: 2px solid #A0522D; }
        .btn { transition: all 0.3s ease; }
        .btn-primary { background-color: #A0522D; color: white; }
        .btn-primary:hover { background-color: #8B4513; }
        .btn-secondary { background-color: #E0E0E0; color: #3D3D3D; }
        .btn-secondary:hover { background-color: #BDBDBD; }
        .btn.active { background-color: #8B4513; color: white; }
        .section-title::after { content: ''; display: block; width: 50px; height: 3px; background-color: #A0522D; margin-top: 8px; }
        .chart-container { position: relative; width: 100%; max-width: 1200px; margin-left: auto; margin-right: auto; height: 500px; max-height: 70vh; }
        .camera-icon { filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2)); }
        .tab-btn { padding: 0.75rem 1.5rem; font-weight: 500; color: #6B7280; border-bottom: 3px solid transparent; transition: all 0.3s ease; }
        .tab-btn.active { color: #A0522D; border-bottom-color: #A0522D; }
        .modal-overlay { background-color: rgba(0,0,0,0.5); transition: opacity 0.3s ease-in-out; }
        .ref-btn { background-color: rgba(255, 255, 255, 0.2); backdrop-filter: blur(4px); border: 1px solid rgba(255, 255, 255, 0.3); }
        .ref-btn:hover { background-color: rgba(255, 255, 255, 0.3); }
    </style>
</head>
<body class="antialiased">
    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <h1 class="text-xl font-bold text-gray-800">2025 WSOP Cyprus</h1>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#vision" class="nav-link font-medium text-gray-600 pb-1">비전</a>
                    <a href="#strategy" class="nav-link font-medium text-gray-600 pb-1">전략</a>
                    <a href="#team" class="nav-link font-medium text-gray-600 pb-1">팀 & 역할</a>
                    <a href="#setup" class="nav-link font-medium text-gray-600 pb-1">장비 구성</a>
                    <a href="#roadmap" class="nav-link font-medium text-gray-600 pb-1">로드맵</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <section id="vision" class="text-center mb-20">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">프로젝트 비전</h2>
            <p class="text-5xl md:text-6xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-amber-700 to-stone-700 py-4">"정적 화면의 정점"을 향하여</p>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 mt-4">
                모든 샷은 그 자체로 완벽한 미학적 가치를 지니며, <br> 결정적 순간에는 압도적인 연출로 시청자의 감정을 사로잡을 것입니다.
            </p>
        </section>

        <section id="strategy" class="mb-20">
            <h2 class="section-title text-3xl font-bold text-gray-900 mb-12 text-center">핵심 전략: 이중적 "엣지" 구현</h2>
            <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto">
                <div class="card p-8 rounded-xl shadow-lg">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-4">💎</span>
                        <h3 class="text-2xl font-bold text-gray-800">보편적 엣지 (Universal Edge)</h3>
                    </div>
                    <p class="text-gray-600 mb-2 font-semibold">"정적 화면의 정점"</p>
                    <p class="text-gray-600">
                        플레이어 미드 샷을 포함한 모든 기본 샷에서 일관되게 구현되는 최고 수준의 A컷. <br> 모든 샷을 완벽하게 계산된 사진 작품처럼 구성하여, <br> 방송 전체의 기본 품질을 격상시키고 지속적인 몰입감을 제공합니다.
                    </p>
                </div>
                <div class="card p-8 rounded-xl shadow-lg relative group overflow-hidden">
                    <div class="flex items-center mb-4">
                        <span class="text-3xl mr-4">🔥</span>
                        <h3 class="text-2xl font-bold text-gray-800">킥 엣지 (Kick Edge)</h3>
                    </div>
                    <p class="text-gray-600 mb-2 font-semibold">"핵심 핸드의 다이나믹한 연출"</p>
                    <p class="text-gray-600">
                        대회의 가장 중요한 분기점에서 펼쳐지는 특별한 숏 시퀀스. <br> 빅팟 올인, 중요 인물의 탈락 위기 등 주요 순간에 극적인 연출을 도입하여 시청자에게 강렬한 드라마와 감동을 선사합니다.
                    </p>
                    <div class="absolute inset-0 bg-black bg-opacity-70 flex flex-col items-center justify-center space-y-4 p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <button class="ref-btn text-white font-bold py-2 px-4 rounded-lg w-full kick-edge-ref-btn" data-url="https://www.youtube.com/embed/QP5TZGTR3B8?start=28293&autoplay=1&mute=1">▶ 레퍼런스 #01</button>
                        <button class="ref-btn text-white font-bold py-2 px-4 rounded-lg w-full kick-edge-ref-btn" data-url="https://www.youtube.com/embed/6kdfG00zYCI?start=8142&autoplay=1&mute=1">▶ 레퍼런스 #02</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="team" class="mb-20">
            <h2 class="section-title text-3xl font-bold text-gray-900 mb-12 text-center">프로젝트 팀 및 역할</h2>
            <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-200">
                <div class="flex justify-center border-b border-gray-200 mb-8">
                    <button id="view-by-person-tab" class="tab-btn active">개인별 보기</button>
                    <button id="view-by-pre-prod-tab" class="tab-btn">프리 프로덕션 업무</button>
                    <button id="view-by-prod-tab" class="tab-btn">프로덕션 업무</button>
                </div>

                <div id="view-panel-person">
                    <div id="team-cards-container" class="grid sm:grid-cols-2 lg:grid-cols-4 gap-8"></div>
                    <div id="team-details-container" class="mt-8"></div>
                </div>

                <div id="view-panel-pre-prod" class="hidden space-y-6"></div>
                <div id="view-panel-prod" class="hidden space-y-6"></div>
            </div>
        </section>

        <section id="setup" class="mb-20">
            <h2 class="section-title text-3xl font-bold text-gray-900 mb-12 text-center">장비 구성 진화: MPP → WSOP SC</h2>
            <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-200">
                <p class="text-center text-gray-600 mb-8">5월 MPP 프로젝트의 경험을 바탕으로, 10월 WSOP SC에서는 카메라 시스템을 단계적으로 발전시켜 A컷 품질을 극대화합니다.</p>
                
                <div class="flex justify-center border-b border-gray-200 mb-8">
                    <button id="tab-may-initial" class="tab-btn active">5월 MPP 초기</button>
                    <button id="tab-may-final" class="tab-btn">5월 MPP 후기</button>
                    <button id="tab-oct" class="tab-btn">10월 WSOP SC</button>
                </div>
                
                <!-- 5월 MPP 초기 패널 -->
                <div id="tab-panel-may-initial" class="tab-panel">
                     <p class="text-center font-semibold text-gray-700 mb-4">기본 8캠 시스템으로 안정적 운영에 집중</p>
                    <div class="relative max-w-4xl mx-auto aspect-[16/9] flex items-center justify-center p-4 sm:p-8">
                        <div class="absolute w-full h-full flex items-center justify-center">
                             <div class="w-[60%] h-[55%] bg-gray-500 border-8 border-gray-700 rounded-[50%] flex items-center justify-center text-white font-bold relative">
                                <div class="absolute bottom-2 bg-slate-900 px-4 py-1 rounded-md text-sm shadow-lg">Dealer</div>
                                 <div class="absolute text-center"><div class="flex items-center gap-1 text-sm">📷<span class="hidden sm:inline">탑 캠</span></div><div class="flex items-center gap-1 text-sm">📹<span class="hidden sm:inline">보드 캠</span></div></div>
                            </div>
                        </div>
                        <div class="absolute top-[55%] left-0 text-center camera-icon"><div class="text-2xl sm:text-4xl text-yellow-400">📹</div><span class="text-xs font-semibold">FR7 #4</span></div>
                        <div class="absolute bottom-[5%] left-[15%] text-center camera-icon"><div class="text-2xl sm:text-4xl text-yellow-400">📹</div><span class="text-xs font-semibold">FR7 #3</span></div>
                        <div class="absolute bottom-[5%] right-[15%] text-center camera-icon"><div class="text-2xl sm:text-4xl text-yellow-400">📹</div><span class="text-xs font-semibold">FR7 #2</span></div>
                        <div class="absolute top-[55%] right-0 text-center camera-icon"><div class="text-2xl sm:text-4xl text-yellow-400">📹</div><span class="text-xs font-semibold">FR7 #1</span></div>
                        <div class="absolute top-0 right-[20%] text-center camera-icon"><div class="text-2xl sm:text-4xl text-green-500">🎥</div><span class="text-xs font-semibold">Free Cam</span></div>
                        <div class="absolute bottom-0 left-1/2 -translate-x-1/2 text-center camera-icon"><div class="text-2xl sm:text-4xl text-purple-500">🎥</div><span class="text-xs font-semibold">Full Shot</span></div>
                    </div>
                     <ul class="mt-8 text-center text-gray-700 grid grid-cols-2 sm:grid-cols-3 gap-2 max-w-3xl mx-auto">
                        <li>📹 Sony FR7 (PTZ) x 4</li>
                        <li>📹 보드 캠 (FR7) x 1</li>
                        <li>📷 탑 캠 (Overhead) x 1</li>
                        <li>🎥 프리 캠 (Freelance) x 1</li>
                        <li>🎥 풀 샷 캠 (Full Shot) x 1</li>
                        <li class="font-bold col-span-full sm:col-auto">총 8대 / 테이블</li>
                    </ul>
                </div>

                <!-- 5월 MPP 후기 패널 -->
                <div id="tab-panel-may-final" class="tab-panel hidden">
                     <p class="text-center font-semibold text-gray-700 mb-4">인물 고정 캠 추가로 A컷 안정화</p>
                    <div class="relative max-w-4xl mx-auto aspect-[16/9] flex items-center justify-center p-4 sm:p-8">
                        <div class="absolute w-full h-full flex items-center justify-center">
                             <div class="w-[60%] h-[55%] bg-gray-500 border-8 border-gray-700 rounded-[50%] flex items-center justify-center text-white font-bold relative">
                                <div class="absolute bottom-2 bg-slate-900 px-4 py-1 rounded-md text-sm shadow-lg">Dealer</div>
                                 <div class="absolute text-center"><div class="flex items-center gap-1 text-sm">📷<span class="hidden sm:inline">탑 캠</span></div><div class="flex items-center gap-1 text-sm">📹<span class="hidden sm:inline">보드 캠</span></div></div>
                            </div>
                        </div>
                        <div class="absolute top-[20%] left-[5%] text-center camera-icon"><div class="text-2xl sm:text-4xl text-gray-400">🎥</div><span class="text-xs font-semibold">인물 고정 캠</span></div>
                        <div class="absolute top-[55%] left-0 text-center camera-icon"><div class="text-2xl sm:text-4xl text-yellow-400">📹</div><span class="text-xs font-semibold">FR7 #4</span></div>
                        <div class="absolute bottom-[5%] left-[15%] text-center camera-icon"><div class="text-2xl sm:text-4xl text-yellow-400">📹</div><span class="text-xs font-semibold">FR7 #3</span></div>
                        <div class="absolute bottom-[5%] right-[15%] text-center camera-icon"><div class="text-2xl sm:text-4xl text-yellow-400">📹</div><span class="text-xs font-semibold">FR7 #2</span></div>
                        <div class="absolute top-[55%] right-0 text-center camera-icon"><div class="text-2xl sm:text-4xl text-yellow-400">📹</div><span class="text-xs font-semibold">FR7 #1</span></div>
                        <div class="absolute top-0 right-[20%] text-center camera-icon"><div class="text-2xl sm:text-4xl text-green-500">🎥</div><span class="text-xs font-semibold">Free Cam</span></div>
                        <div class="absolute bottom-0 left-1/2 -translate-x-1/2 text-center camera-icon"><div class="text-2xl sm:text-4xl text-purple-500">🎥</div><span class="text-xs font-semibold">Full Shot</span></div>
                    </div>
                     <ul class="mt-8 text-center text-gray-700 grid grid-cols-2 sm:grid-cols-3 gap-2 max-w-3xl mx-auto">
                        <li>📹 Sony FR7 (PTZ) x 4</li>
                        <li>🎥 인물 고정 캠 x 1</li>
                        <li>📹 보드 캠 (FR7) x 1</li>
                        <li>📷 탑 캠 (Overhead) x 1</li>
                        <li>🎥 프리 캠 (Freelance) x 1</li>
                        <li>🎥 풀 샷 캠 (Full Shot) x 1</li>
                        <li class="font-bold col-span-full sm:col-auto">총 9대 / 테이블</li>
                    </ul>
                </div>

                <!-- 10월 WSOP SC 패널 -->
                <div id="tab-panel-oct" class="tab-panel hidden">
                    <p class="text-center font-semibold text-gray-700 mb-4">전체 FR7 시스템으로 업그레이드하여 퀄리티 표준화 (총 10캠)</p>
                     <div class="relative max-w-4xl mx-auto aspect-[16/9] flex items-center justify-center p-4 sm:p-8">
                        <div class="absolute w-full h-full flex items-center justify-center">
                             <div class="w-[60%] h-[55%] bg-blue-800 border-8 border-yellow-800 rounded-[50%] flex items-center justify-center text-white font-bold relative">
                                <div class="absolute bottom-2 bg-slate-900 px-4 py-1 rounded-md text-sm shadow-lg">Dealer</div>
                                <div class="absolute text-center"><div class="flex items-center gap-1 text-sm">📷<span class="hidden sm:inline">탑 캠</span></div><div class="flex items-center gap-1 text-sm">📹<span class="hidden sm:inline">보드 캠</span></div></div>
                            </div>
                        </div>
                        <div class="absolute top-[20%] left-[5%] text-center camera-icon"><div class="text-2xl sm:text-4xl text-yellow-400">📹</div><span class="text-xs font-semibold">FR7 #5</span></div>
                        <div class="absolute top-[55%] left-0 text-center camera-icon"><div class="text-2xl sm:text-4xl text-yellow-400">📹</div><span class="text-xs font-semibold">FR7 #4</span></div>
                        <div class="absolute bottom-[5%] left-[15%] text-center camera-icon"><div class="text-2xl sm:text-4xl text-yellow-400">📹</div><span class="text-xs font-semibold">FR7 #3</span></div>
                        <div class="absolute bottom-[5%] right-[15%] text-center camera-icon"><div class="text-2xl sm:text-4xl text-yellow-400">📹</div><span class="text-xs font-semibold">FR7 #2</span></div>
                        <div class="absolute top-[55%] right-0 text-center camera-icon"><div class="text-2xl sm:text-4xl text-yellow-400">📹</div><span class="text-xs font-semibold">FR7 #1</span></div>
                        <div class="absolute top-[20%] right-[5%] text-center camera-icon"><div class="text-2xl sm:text-4xl text-yellow-400">📹</div><span class="text-xs font-semibold">FR7 #6</span></div>
                        <div class="absolute top-0 right-[25%] text-center camera-icon"><div class="text-2xl sm:text-4xl text-green-500">🎥</div><span class="text-xs font-semibold">Free Cam</span></div>
                        <div class="absolute bottom-0 left-1/2 -translate-x-1/2 text-center camera-icon"><div class="text-2xl sm:text-4xl text-purple-500">🎥</div><span class="text-xs font-semibold">Full Shot</span></div>
                    </div>
                     <ul class="mt-8 text-center text-gray-700 grid grid-cols-2 sm:grid-cols-3 gap-2 max-w-3xl mx-auto">
                        <li>📹 Sony FR7 (PTZ) x 6</li>
                        <li>📹 보드 캠 (FR7) x 1</li>
                        <li>📷 탑 캠 (Overhead) x 1</li>
                        <li>🎥 프리 캠 (Freelance) x 1</li>
                        <li>🎥 풀 샷 캠 (Full Shot) x 1</li>
                        <li class="font-bold col-span-full sm:col-auto">총 10대 / 테이블</li>
                    </ul>
                </div>

            </div>
        </section>
        
        <section id="roadmap" class="mb-20">
            <h2 class="section-title text-3xl font-bold text-gray-900 mb-12 text-center">프로젝트 로드맵</h2>
            <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200">
                 <div class="flex flex-wrap justify-center gap-2 mb-6">
                    <button id="filter-all" class="btn btn-primary px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm">전체</button>
                    <button id="filter-phase1" class="btn btn-secondary px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm">1단계</button>
                    <button id="filter-phase2" class="btn btn-secondary px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm">2단계</button>
                    <button id="filter-phase3" class="btn btn-secondary px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm">3단계</button>
                    <button id="filter-phase4" class="btn btn-secondary px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm">최종 준비</button>
                    <span class="border-l mx-2 hidden sm:block"></span>
                    <button id="filter-aiden" class="btn btn-secondary px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm">👑 Aiden</button>
                    <button id="filter-kai" class="btn btn-secondary px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm">🎨 Kai</button>
                    <button id="filter-matthew" class="btn btn-secondary px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm">🛠️ Matthew</button>
                    <button id="filter-trey" class="btn btn-secondary px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm">🕹️ Trey</button>
                </div>
                <div class="chart-container">
                    <canvas id="ganttChart"></canvas>
                </div>
                <div class="text-center mt-6">
                    <button id="add-task-btn" class="btn btn-primary px-6 py-2 rounded-lg font-semibold">업무 추가</button>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white mt-20">
        <div class="container mx-auto px-8 py-4 text-center">
            <p>© 2025 GG Production. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- Task Modal -->
    <div id="task-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md">
            <div class="p-6">
                <h3 id="modal-title" class="text-xl font-bold mb-4">업무 추가/수정</h3>
                <form id="task-form">
                    <input type="hidden" id="task-id">
                    <div class="mb-4">
                        <label for="task-label" class="block text-sm font-medium text-gray-700">업무 내용</label>
                        <input type="text" id="task-label" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                    </div>
                    <div class="mb-4">
                        <label for="task-member" class="block text-sm font-medium text-gray-700">담당자</label>
                        <select id="task-member" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required></select>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="task-start" class="block text-sm font-medium text-gray-700">시작일</label>
                            <input type="date" id="task-start" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                        </div>
                        <div>
                            <label for="task-end" class="block text-sm font-medium text-gray-700">종료일</label>
                            <input type="date" id="task-end" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                        </div>
                    </div>
                     <div class="mb-4">
                        <label for="task-phase" class="block text-sm font-medium text-gray-700">단계</label>
                        <select id="task-phase" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                            <option value="1">1단계: 분석/기획</option>
                            <option value="2">2단계: R&D</option>
                            <option value="3">3단계: 리허설</option>
                            <option value="4">4단계: 최종 준비</option>
                        </select>
                    </div>
                    <div class="flex justify-end gap-2">
                         <button type="button" id="delete-task-btn" class="btn bg-red-600 text-white px-4 py-2 rounded-md hidden">삭제</button>
                        <button type="button" id="close-modal-btn" class="btn btn-secondary px-4 py-2 rounded-md">취소</button>
                        <button type="submit" class="btn btn-primary px-4 py-2 rounded-md">저장</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Video Modal -->
    <div id="video-modal" class="modal-overlay fixed inset-0 z-[100] flex items-center justify-center p-4 hidden">
        <div class="bg-black w-full max-w-4xl aspect-video relative">
            <iframe id="youtube-iframe" class="w-full h-full" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            <button id="close-video-modal" class="absolute -top-2 -right-2 text-white bg-black rounded-full w-8 h-8 flex items-center justify-center text-xl">&times;</button>
        </div>
    </div>


    <script type="module">
        document.addEventListener('DOMContentLoaded', () => {
            const { initializeApp } = window.firebase;
            const { getAuth, signInAnonymously } = window.firebase;
            const { getFirestore, collection, onSnapshot, addDoc, doc, setDoc, deleteDoc, getDocs, writeBatch } = window.firebase;
            
            let db, auth, taskCollection;
            let allTasks = [];
            let currentFilter = 'all';
            let ganttChart;

            const teamData = [
                { id: 'aiden', name: 'Aiden Kim', role: '파트 리더', emoji: '👑', color: 'rgba(217, 119, 6, 0.7)', 
                  pre_tasks: [ 'A컷 품질 향상 목표 설정 및 팀 비전 제시', 'A컷 스타일 가이드 최종 제안', '팀원 R&D 방향 설정 및 성과 관리', '리허설 시나리오 설계 및 총괄 지휘' ],
                  prod_tasks: [ '현장 카메라 디렉팅 총괄', '"킥 엣지" 특별 숏 시퀀스 창의적 연출 담당', '최종 의사결정 및 현장 문제 해결' ]
                },
                { id: 'kai', name: 'Kai Kim', role: '카메라 감독', emoji: '🎨', color: 'rgba(59, 130, 246, 0.7)',
                  pre_tasks: [ 'A컷 미학적 요소 (구도, 앵글) R&D 주도', 'A컷 스타일 가이드 시각적 레퍼런스 제작', '6GHz 무선 시스템 등 전체 방송 장비 테스트/관리', '리허설 시 미학/연출 점검' ],
                  prod_tasks: [ '프리캠(2인) 총괄 디렉팅 및 A컷 품질 책임', '현장 A컷 품질 실시간 관리', '"킥 엣지" 시퀀스 실행 감독' ]
                },
                { id: 'matthew', name: 'Matthew Kim', role: '기술/장비 감독', emoji: '🛠️', color: 'rgba(22, 163, 74, 0.7)',
                   pre_tasks: [ '18캠 시스템 최적화 및 A컷 구현 설정 확보', '조명/렌즈 등 기술 요소 R&D 및 최적 조합 연구', '사이프러스 물류/운송 계획 수립', '리허설 시 기술 지원 및 시스템 안정성 점검' ],
                   prod_tasks: [ '현장 장비 설치, 운영, 철수 총괄', '실시간 기술 문제 해결 및 장비 트러블슈팅', '데이터 관리 및 백업 총괄' ]
                },
                { id: 'trey', name: 'Trey Song', role: '스위처 시스템 개발 / 운용', emoji: '🕹️', color: 'rgba(120, 81, 169, 0.7)',
                  pre_tasks: [ '플레이어 액션 기반 신규 스위처 시스템 개발', '휴먼 에러 최소화를 위한 스위칭 로직 구현', '포커 도메인 분석을 통한 "킥 엣지" 발생 예측 모델 연구', 'GFX/아카이빙 시스템 설계 및 연동 테스트', '리허설 시 스위처 통합 테스트' ],
                  prod_tasks: [ '메인 스위처 실시간 운용', '카메라 콜 및 GFX 연동 실행', '방송 영상 실시간 아카이빙 관리' ]
                }
            ];

            const memberColorMap = teamData.reduce((acc, member) => { acc[member.id] = member.color; return acc; }, {});
            const memberEmojiMap = teamData.reduce((acc, member) => { acc[member.id] = member.emoji; return acc; }, {});
            
            const weekLabels = [ '6월 W2','6월 W3','6월 W4','7월 W1','7월 W2','7월 W3','7월 W4','8월 W1','8월 W2','8월 W3','8월 W4','9월 W1','9월 W2','9월 W3','9월 W4','10월 W1' ];
            const projectStartDate = new Date('2025-06-09');

            function dateToWeekIndex(dateStr) {
                if (!dateStr) return 0;
                const targetDate = new Date(dateStr);
                const diffTime = targetDate - projectStartDate;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                return Math.floor(diffDays / 7);
            }
            
            const initialTasks = [
                    { phase: '1', label: '프로젝트 총괄 기획', member: 'aiden', startDate: '2025-06-11', endDate: '2025-06-28'}, { phase: '1', label: '5월 MPP 분석 및 레퍼런스 수집', member: 'kai', startDate: '2025-06-11', endDate: '2025-06-21'}, { phase: '1', label: 'A컷 스타일가이드 V0.1', member: 'kai', startDate: '2025-06-24', endDate: '2025-06-28'}, { phase: '1', label: '18캠 시스템 구성/요구사항 정의', member: 'matthew', startDate: '2025-06-11', endDate: '2025-06-21'}, { phase: '1', label: '6GHz 시스템 리서치/준비', member: 'matthew', startDate: '2025-06-24', endDate: '2025-07-05'}, { phase: '2', label: '신규 스위처 분석/설계', member: 'trey', startDate: '2025-08-05', endDate: '2025-08-16'}, { phase: '2', label: '팀 R&D 진행상황 점검/피드백', member: 'aiden', startDate: '2025-07-01', endDate: '2025-08-16'}, { phase: '2', label: 'R&D: "킥 엣지" 디자인', member: 'aiden', startDate: '2025-08-19', endDate: '2025-08-23'}, { phase: '2', label: '기술 통합 및 최종 점검', member: 'aiden', startDate: '2025-08-26', endDate: '2025-08-30'}, { phase: '2', label: 'R&D: 구도/앵글 심화', member: 'kai', startDate: '2025-07-01', endDate: '2025-07-12'}, { phase: '2', label: 'R&D: 색감/톤앤매너', member: 'kai', startDate: '2025-07-15', endDate: '2025-07-26'}, { phase: '2', label: 'R&D: 배경/DoF 및 6GHz 테스트', member: 'kai', startDate: '2025-07-29', endDate: '2025-08-16'}, { phase: '2', label: 'A컷 스타일가이드 V1.0 최종화', member: 'kai', startDate: '2025-08-19', endDate: '2025-08-30'}, { phase: '2', label: 'R&D: 조명 시스템 설계', member: 'matthew', startDate: '2025-07-08', endDate: '2025-07-19'}, { phase: '2', label: 'FR7 및 고정캠 최적화 R&D', member: 'matthew', startDate: '2025-07-22', endDate: '2025-08-02'}, { phase: '2', label: '사이프러스 물류/운송 계획', member: 'matthew', startDate: '2025-08-05', endDate: '2025-08-30'}, { phase: '2', label: '스위처 개발 및 GFX/아카이빙 연동', member: 'trey', startDate: '2025-08-19', endDate: '2025-08-30'}, { phase: '3', label: '리허설 총괄', member: 'aiden', startDate: '2025-09-02', endDate: '2025-09-27'}, { phase: '3', label: '리허설 (미학/연출 점검)', member: 'kai', startDate: '2025-09-02', endDate: '2025-09-27'}, { phase: '3', label: '리허설 (기술 지원)', member: 'matthew', startDate: '2025-09-02', endDate: '2025-09-27'}, { phase: '3', label: '리허설 (스위처 통합 테스트)', member: 'trey', startDate: '2025-09-02', endDate: '2025-09-27'}, { phase: '4', label: '최종 패킹 및 출국 준비', member: 'aiden', startDate: '2025-09-30', endDate: '2025-10-04'}, { phase: '4', label: '최종 패킹 및 출국 준비', member: 'kai', startDate: '2025-09-30', endDate: '2025-10-04'}, { phase: '4', label: '최종 패킹 및 출국 준비', member: 'matthew', startDate: '2025-09-30', endDate: '2025-10-04'}, { phase: '4', label: '최종 패킹 및 출국 준비', member: 'trey', startDate: '2025-09-30', endDate: '2025-10-04'},
            ].map(task => ({ ...task, start: dateToWeekIndex(task.startDate), end: dateToWeekIndex(task.endDate) }));

            function updateChart(filter) {
                currentFilter = filter;
                let filteredTasks;
                if (filter === 'all' || filter.startsWith('phase')) {
                    if (filter === 'all') { filteredTasks = allTasks.sort((a,b) => a.start - b.start); } 
                    else { const phaseFilter = filter.replace('phase', ''); filteredTasks = allTasks.filter(task => task.phase === phaseFilter); }
                } else { filteredTasks = allTasks.filter(task => task.member === filter); }

                ganttChart.data.labels = filteredTasks.map(d => `${memberEmojiMap[d.member]} ${d.label}`);
                ganttChart.data.datasets = [{ data: filteredTasks.map(d => [d.start, d.end + 1]), backgroundColor: filteredTasks.map(d => memberColorMap[d.member] || 'gray'), barPercentage: 0.6, borderRadius: 4 }];
                ganttChart.update();

                document.querySelectorAll('#roadmap .btn').forEach(b => { b.classList.remove('active', 'btn-primary'); b.classList.add('btn-secondary'); });
                document.getElementById(`filter-${filter}`).classList.add('active', 'btn-primary');
                document.getElementById(`filter-${filter}`).classList.remove('btn-secondary');
            }
            
            async function initApp() {
                const firebaseConfig = { apiKey: "AIzaSyBqJL9rF1UFH2F9glfYQixAiOMxD0aooPg", authDomain: "ggp-camera-plan.firebaseapp.com", projectId: "ggp-camera-plan", storageBucket: "ggp-camera-plan.appspot.com", messagingSenderId: "108052983282", appId: "1:108052983282:web:39f8b769a628f81c7d8f6b" };
                try {
                    const app = initializeApp(firebaseConfig);
                    db = getFirestore(app);
                    auth = getAuth(app);
                    await signInAnonymously(auth);
                    taskCollection = collection(db, "roadmap_tasks");
                    
                    const querySnapshot = await getDocs(taskCollection);
                    if (querySnapshot.empty) {
                        const batch = writeBatch(db);
                        initialTasks.forEach(task => {
                            const newDocRef = doc(taskCollection);
                            batch.set(newDocRef, task);
                        });
                        await batch.commit();
                    }

                    onSnapshot(taskCollection, (snapshot) => {
                        allTasks = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        updateChart(currentFilter);
                    }, (error) => {
                        console.error("데이터 가져오기 오류:", error);
                        allTasks = initialTasks;
                        updateChart('all');
                    });
                } catch (error) {
                    console.error("Firebase 초기화 오류:", error);
                    allTasks = initialTasks;
                    updateChart('all');
                }
            }
            
            function setupUI() {
                const teamCardsContainer = document.getElementById('team-cards-container');
                teamData.forEach(member => {
                    const card = document.createElement('div');
                    card.className = `card p-6 rounded-xl text-center cursor-pointer member-card border-2 border-transparent`;
                    card.style.backgroundColor = member.color.replace('0.7', '0.1');
                    card.dataset.memberId = member.id;
                    card.innerHTML = `<div class="text-5xl mb-3">${member.emoji}</div><h4 class="text-xl font-bold text-gray-800">${member.name}</h4><p class="font-semibold" style="color: ${member.color.replace('0.7', '1')}">${member.role}</p>`;
                    teamCardsContainer.appendChild(card);
                });

                const ctx = document.getElementById('ganttChart').getContext('2d');
                ganttChart = new Chart(ctx, { 
                    type: 'bar', data: { labels: [], datasets: [] },
                    options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false,
                        plugins: { legend: { display: false },
                            tooltip: { callbacks: {
                                label: function(context) { const startWeek = weekLabels[context.raw[0]]; const endWeek = weekLabels[context.raw[1] - 1]; if(!startWeek || !endWeek) return ''; const labelText = context.chart.data.labels[context.dataIndex].substring(2); if(startWeek === endWeek) return `${labelText}: ${startWeek}`; return `${labelText}: ${startWeek} ~ ${endWeek}`; }
                            }}
                        },
                        scales: { x: { type: 'linear', position: 'top', min: -0.5, max: weekLabels.length - 0.5,
                                ticks: { stepSize: 1, callback: function(value, index) { if (index >= weekLabels.length) return ''; const currentMonth = weekLabels[index].split(' ')[0]; const prevMonth = index > 0 ? weekLabels[index - 1].split(' ')[0] : ''; if (currentMonth !== prevMonth) return currentMonth; return ''; }},
                                grid: { drawOnChartArea: false }
                            },
                            xAxis2: { type: 'linear', position: 'top', min: -0.5, max: weekLabels.length - 0.5,
                                ticks: { stepSize: 1, callback: function(value, index) { const label = weekLabels[index] || ''; return label.split(' ')[1] || ''; }},
                                grid: { color: 'rgba(0,0,0,0.05)' }
                            },
                            y: { grid: { display: false } }
                        }
                    }
                });
            }

            function setupEventListeners() {
                const roadmapFilters = document.getElementById('roadmap');
                roadmapFilters.addEventListener('click', (e) => {
                    if (e.target.tagName !== 'BUTTON') return;
                    const filterId = e.target.id.replace('filter-', '');
                    updateChart(filterId);
                });

                const teamCardsContainer = document.getElementById('team-cards-container');
                const teamDetailsContainer = document.getElementById('team-details-container');
                teamCardsContainer.addEventListener('click', (e) => {
                    const card = e.target.closest('.member-card');
                    if (!card) return;
                    const memberId = card.dataset.memberId;
                    const member = teamData.find(m => m.id === memberId);
                    document.querySelectorAll('.member-card').forEach(c => c.style.borderColor = 'transparent');
                    card.style.borderColor = member.color.replace('0.7', '1');
                    teamDetailsContainer.innerHTML = `<div class="bg-white p-6 rounded-xl shadow-lg border-2" style="border-color: ${member.color.replace('0.7', '0.2')}"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><h4 class="text-lg font-bold mb-2 text-gray-800">프리 프로덕션 (준비 단계)</h4><ul class="space-y-2 list-disc list-inside text-gray-700">${member.pre_tasks.map(task => `<li>${task}</li>`).join('')}</ul></div><div><h4 class="text-lg font-bold mb-2 text-gray-800">프로덕션 (현장 실행)</h4><ul class="space-y-2 list-disc list-inside text-gray-700">${member.prod_tasks.map(task => `<li>${task}</li>`).join('')}</ul></div></div></div>`;
                });

                const viewPersonTab = document.getElementById('view-by-person-tab');
                const viewPreProdTab = document.getElementById('view-by-pre-prod-tab');
                const viewProdTab = document.getElementById('view-by-prod-tab');
                const personPanel = document.getElementById('view-panel-person');
                const preProdPanel = document.getElementById('view-panel-pre-prod');
                const prodPanel = document.getElementById('view-panel-prod');
                function renderPhaseView(panel, taskType) {
                    panel.innerHTML = '';
                    teamData.forEach(member => {
                        const memberEl = document.createElement('div');
                        memberEl.className = 'p-4 rounded-lg';
                        memberEl.style.backgroundColor = member.color.replace('0.7', '0.1');
                        const tasks = member[taskType].map(task => `<li>${task}</li>`).join('');
                        memberEl.innerHTML = `<h4 class="text-lg font-bold mb-2 flex items-center" style="color: ${member.color.replace('0.7', '1')}"><span class="text-2xl mr-2">${member.emoji}</span>${member.name}</h4><ul class="space-y-2 list-disc list-inside text-gray-700 pl-4">${tasks}</ul>`;
                        panel.appendChild(memberEl);
                    });
                }
                viewPersonTab.addEventListener('click', () => {
                    personPanel.classList.remove('hidden'); preProdPanel.classList.add('hidden'); prodPanel.classList.add('hidden');
                    viewPersonTab.classList.add('active'); viewPreProdTab.classList.remove('active'); viewProdTab.classList.remove('active');
                });
                viewPreProdTab.addEventListener('click', () => {
                    personPanel.classList.add('hidden'); preProdPanel.classList.remove('hidden'); prodPanel.classList.add('hidden');
                    viewPersonTab.classList.remove('active'); viewPreProdTab.classList.add('active'); viewProdTab.classList.remove('active');
                    renderPhaseView(preProdPanel, 'pre_tasks');
                });
                viewProdTab.addEventListener('click', () => {
                    personPanel.classList.add('hidden'); preProdPanel.classList.add('hidden'); prodPanel.classList.remove('hidden');
                    viewPersonTab.classList.remove('active'); viewPreProdTab.classList.remove('active'); viewProdTab.classList.add('active');
                    renderPhaseView(prodPanel, 'prod_tasks');
                });

                const setupTabContainer = document.querySelector('#setup .flex.justify-center');
                const setupPanels = document.querySelectorAll('#setup .tab-panel');
                setupTabContainer.addEventListener('click', (e) => {
                    if (e.target.tagName !== 'BUTTON') return;
                    setupTabContainer.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                    setupPanels.forEach(panel => panel.classList.add('hidden'));
                    e.target.classList.add('active');
                    if (e.target.id === 'tab-may-initial') document.getElementById('tab-panel-may-initial').classList.remove('hidden');
                    else if (e.target.id === 'tab-may-final') document.getElementById('tab-panel-may-final').classList.remove('hidden');
                    else if (e.target.id === 'tab-oct') document.getElementById('tab-panel-oct').classList.remove('hidden');
                });

                const videoModal = document.getElementById('video-modal');
                const closeVideoModalBtn = document.getElementById('close-video-modal');
                const youtubeIframe = document.getElementById('youtube-iframe');
                document.querySelector('#strategy').addEventListener('click', (e) => {
                     const button = e.target.closest('.kick-edge-ref-btn');
                     if(button) {
                        const url = button.dataset.url;
                        youtubeIframe.src = url;
                        videoModal.classList.remove('hidden');
                    }
                });
                const closeVideoModal = () => { videoModal.classList.add('hidden'); youtubeIframe.src = ""; };
                closeVideoModalBtn.addEventListener('click', closeVideoModal);
                videoModal.addEventListener('click', (e) => { if (e.target === videoModal) closeVideoModal(); });

                const navLinks = document.querySelectorAll('.nav-link');
                const sections = document.querySelectorAll('main section');
                window.addEventListener('scroll', () => {
                    let current = '';
                    sections.forEach(section => {
                        if (pageYOffset >= section.offsetTop - 80) current = section.getAttribute('id');
                    });
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href').includes(current)) link.classList.add('active');
                    });
                });

                navLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        document.querySelector(link.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
                    });
                });
            }

            // Start the application
            setupUI();
            setupEventListeners();
            initApp();
        });
    </script>
</body>
</html>
